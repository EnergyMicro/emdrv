<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Energy Micro Drivers: NVM</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>NVM<br/>
<small>
[<a class="el" href="group__EM__Drivers.html">EM_Drivers</a>]</small>
</h1>
<p><div class="dynheader">
Collaboration diagram for NVM:</div>
<div class="dynsection">
<center><table><tr><td><img src="group__NVM.png" border="0" alt="" usemap="#group____NVM_map"/>
<map name="group____NVM_map" id="group____NVM">
<area shape="rect" id="node2" href="group__EM__Drivers.html" title="EM_Drivers" alt="" coords="6,5,93,32"/></map></td></tr></table></center>
</div>
</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structNVM__Object__Descriptor__t.html">NVM_Object_Descriptor_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Describes the properties of an object in a page.  <a href="structNVM__Object__Descriptor__t.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structNVM__Page__Descriptor__t.html">NVM_Page_Descriptor_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Describes the properties of a page.  <a href="structNVM__Page__Descriptor__t.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structNVM__Config__t.html">NVM_Config_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configuration structure.  <a href="structNVM__Config__t.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structNVM__Object__Descriptor__t.html">NVM_Object_Descriptor_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NVM.html#gad031bb1b4302cdf6c337fdcfb367256b">NVM_Page_t</a> []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A collection of object descriptors that make up a page.  <a href="#gad031bb1b4302cdf6c337fdcfb367256b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structNVM__Page__Descriptor__t.html">NVM_Page_Descriptor_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NVM.html#ga397a9a680fa744d86084bdcb3521548a">NVM_Page_Table_t</a> []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The list of pages registered for use.  <a href="#ga397a9a680fa744d86084bdcb3521548a"></a><br/></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NVM.html#gae2a292fc163eaa08574b4c061c0b1eca">NVM_Page_Type_t</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#ggae2a292fc163eaa08574b4c061c0b1ecaa2e7a6f6ed6a5752e4c4148104af077cd">nvmPageTypeNormal</a> =  0, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#ggae2a292fc163eaa08574b4c061c0b1ecaa81f13288c7f3413c4dc96832d7c11117">nvmPageTypeWear</a> =  1
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Enum describing the type of logical page we have; normal or wear. </p>
 <a href="group__NVM.html#gae2a292fc163eaa08574b4c061c0b1eca">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">NVM_Result_t</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4ab2a0e1ac14d3bef96b336b08caab8b71">nvmResultOk</a> =  0, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a56588a6d44220b2674232a638a545210">nvmResultAddrInvalid</a> =  1, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4adb77a318d5c4e1a6275d197dd893e07c">nvmResultInputInvalid</a> =  2, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a6a64bc960ab527f4b8debcaa77c5b353">nvmResultDataInvalid</a> =  3, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4af8145f5d4e04f5590ed5cb1aac421f9e">nvmResultWriteLock</a> =  4, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a8f5e5c106a187cb6337f4a196045e8ff">nvmResultNoPages</a> =  5, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a53c6dc9ed31b05c84ad77e2e792855c2">nvmResultNoPage</a> =  6, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4ae3c2a8a15627f201bedb2563ae22fca9">nvmResultErrorInitial</a> =  7, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__NVM.html#gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a892f7d002ed842b9a78791c3060cdd4e">nvmResultError</a> =  8
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Result type for all the API functions. </p>
 <a href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">NVM_Result_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NVM.html#ga9cfeca62e83161ee1aa67187f59bcfdf">NVM_Init</a> (<a class="el" href="structNVM__Config__t.html">NVM_Config_t</a> const *config)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the NVM manager.  <a href="#ga9cfeca62e83161ee1aa67187f59bcfdf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">NVM_Result_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NVM.html#gaba5ef1e9c83fcf490d0ac6e45513f597">NVM_Erase</a> (uint32_t erasureCount)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Erase the entire NVM.  <a href="#gaba5ef1e9c83fcf490d0ac6e45513f597"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">NVM_Result_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NVM.html#ga3731be4b973fb565af60dc9905bfe289">NVM_Write</a> (uint16_t pageId, uint8_t objectId)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write an object or a page.  <a href="#ga3731be4b973fb565af60dc9905bfe289"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">NVM_Result_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NVM.html#gaa91a84a7102e51e3453f01293f292385">NVM_Read</a> (uint16_t pageId, uint8_t objectId)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read an object or an entire page.  <a href="#gaa91a84a7102e51e3453f01293f292385"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__NVM.html#ga00eaed13302c2951bec32c92dca57597">NVM_WearLevelGet</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get maximum wear level.  <a href="#ga00eaed13302c2951bec32c92dca57597"></a><br/></td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gad031bb1b4302cdf6c337fdcfb367256b"></a><!-- doxytag: member="nvm.h::NVM_Page_t" ref="gad031bb1b4302cdf6c337fdcfb367256b" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structNVM__Object__Descriptor__t.html">NVM_Object_Descriptor_t</a> <a class="el" href="group__NVM.html#gad031bb1b4302cdf6c337fdcfb367256b">NVM_Page_t</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A collection of object descriptors that make up a page. </p>

<p>Definition at line <a class="el" href="nvm_8h_source.html#l00152">152</a> of file <a class="el" href="nvm_8h_source.html">nvm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga397a9a680fa744d86084bdcb3521548a"></a><!-- doxytag: member="nvm.h::NVM_Page_Table_t" ref="ga397a9a680fa744d86084bdcb3521548a" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structNVM__Page__Descriptor__t.html">NVM_Page_Descriptor_t</a> <a class="el" href="group__NVM.html#ga397a9a680fa744d86084bdcb3521548a">NVM_Page_Table_t</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The list of pages registered for use. </p>

<p>Definition at line <a class="el" href="nvm_8h_source.html#l00164">164</a> of file <a class="el" href="nvm_8h_source.html">nvm.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="gae2a292fc163eaa08574b4c061c0b1eca"></a><!-- doxytag: member="nvm.h::NVM_Page_Type_t" ref="gae2a292fc163eaa08574b4c061c0b1eca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__NVM.html#gae2a292fc163eaa08574b4c061c0b1eca">NVM_Page_Type_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enum describing the type of logical page we have; normal or wear. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggae2a292fc163eaa08574b4c061c0b1ecaa2e7a6f6ed6a5752e4c4148104af077cd"></a><!-- doxytag: member="nvmPageTypeNormal" ref="ggae2a292fc163eaa08574b4c061c0b1ecaa2e7a6f6ed6a5752e4c4148104af077cd" args="" -->nvmPageTypeNormal</em>&nbsp;</td><td>
<p>Normal page, always rewrite. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggae2a292fc163eaa08574b4c061c0b1ecaa81f13288c7f3413c4dc96832d7c11117"></a><!-- doxytag: member="nvmPageTypeWear" ref="ggae2a292fc163eaa08574b4c061c0b1ecaa81f13288c7f3413c4dc96832d7c11117" args="" -->nvmPageTypeWear</em>&nbsp;</td><td>
<p>Wear page. </p>
<p>Can be used several times before rewrite. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="nvm_8h_source.html#l00137">137</a> of file <a class="el" href="nvm_8h_source.html">nvm.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4"></a><!-- doxytag: member="nvm.h::NVM_Result_t" ref="ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">NVM_Result_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Result type for all the API functions. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4ab2a0e1ac14d3bef96b336b08caab8b71"></a><!-- doxytag: member="nvmResultOk" ref="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4ab2a0e1ac14d3bef96b336b08caab8b71" args="" -->nvmResultOk</em>&nbsp;</td><td>
<p>Flash read/write/erase successful. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a56588a6d44220b2674232a638a545210"></a><!-- doxytag: member="nvmResultAddrInvalid" ref="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a56588a6d44220b2674232a638a545210" args="" -->nvmResultAddrInvalid</em>&nbsp;</td><td>
<p>Invalid address. </p>
<p>Write to an address out of bounds. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4adb77a318d5c4e1a6275d197dd893e07c"></a><!-- doxytag: member="nvmResultInputInvalid" ref="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4adb77a318d5c4e1a6275d197dd893e07c" args="" -->nvmResultInputInvalid</em>&nbsp;</td><td>
<p>Invalid input data. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a6a64bc960ab527f4b8debcaa77c5b353"></a><!-- doxytag: member="nvmResultDataInvalid" ref="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a6a64bc960ab527f4b8debcaa77c5b353" args="" -->nvmResultDataInvalid</em>&nbsp;</td><td>
<p>Invalid data. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4af8145f5d4e04f5590ed5cb1aac421f9e"></a><!-- doxytag: member="nvmResultWriteLock" ref="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4af8145f5d4e04f5590ed5cb1aac421f9e" args="" -->nvmResultWriteLock</em>&nbsp;</td><td>
<p>A write is currently in progress, and any concurrent operations might cause problems. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a8f5e5c106a187cb6337f4a196045e8ff"></a><!-- doxytag: member="nvmResultNoPages" ref="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a8f5e5c106a187cb6337f4a196045e8ff" args="" -->nvmResultNoPages</em>&nbsp;</td><td>
<p>Initialization didn't find any pages. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a53c6dc9ed31b05c84ad77e2e792855c2"></a><!-- doxytag: member="nvmResultNoPage" ref="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a53c6dc9ed31b05c84ad77e2e792855c2" args="" -->nvmResultNoPage</em>&nbsp;</td><td>
<p>Could not find the specified page. </p>
<p>It might not have been saved yet. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4ae3c2a8a15627f201bedb2563ae22fca9"></a><!-- doxytag: member="nvmResultErrorInitial" ref="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4ae3c2a8a15627f201bedb2563ae22fca9" args="" -->nvmResultErrorInitial</em>&nbsp;</td><td>
<p>Result not changed to OK. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a892f7d002ed842b9a78791c3060cdd4e"></a><!-- doxytag: member="nvmResultError" ref="gga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4a892f7d002ed842b9a78791c3060cdd4e" args="" -->nvmResultError</em>&nbsp;</td><td>
<p>General error. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="nvm_8h_source.html#l00175">175</a> of file <a class="el" href="nvm_8h_source.html">nvm.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaba5ef1e9c83fcf490d0ac6e45513f597"></a><!-- doxytag: member="nvm.h::NVM_Erase" ref="gaba5ef1e9c83fcf490d0ac6e45513f597" args="(uint32_t erasureCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">NVM_Result_t</a> NVM_Erase </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>erasureCount</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Erase the entire NVM. </p>
<p>Use this function to erase the entire non-volatile memory area allocated to the NVM system. It is possible to set a fixed erasure count for all the pages, or retain the existing one. To retain the erasure count might not be advisable if an error has occurred since this data may also have been damaged.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>erasureCount</em>&nbsp;</td><td>Specifies which erasure count to set for the blank pages. Pass NVM_ERASE_RETAINCOUNT to retain the erasure count.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns the result of the erase operation using a NVM_Result_t. </dd></dl>

<p>Definition at line <a class="el" href="nvm_8c_source.html#l00419">419</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

<p>References <a class="el" href="nvm_8h_source.html#l00171">NVM_Config_t::nvmArea</a>, <a class="el" href="nvm__hal_8c_source.html#l00671">NVMHAL_PageErase()</a>, <a class="el" href="nvm__hal_8c_source.html#l00483">NVMHAL_Read()</a>, <a class="el" href="nvm__hal_8c_source.html#l00574">NVMHAL_Write()</a>, <a class="el" href="nvm_8h_source.html#l00187">nvmResultErrorInitial</a>, <a class="el" href="nvm_8h_source.html#l00177">nvmResultOk</a>, and <a class="el" href="nvm_8h_source.html#l00169">NVM_Config_t::pages</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__NVM_gaba5ef1e9c83fcf490d0ac6e45513f597_cgraph.png" border="0" usemap="#group__NVM_gaba5ef1e9c83fcf490d0ac6e45513f597_cgraph_map" alt=""></div>
<map name="group__NVM_gaba5ef1e9c83fcf490d0ac6e45513f597_cgraph_map" id="group__NVM_gaba5ef1e9c83fcf490d0ac6e45513f597_cgraph">
<area shape="rect" id="node3" href="nvm__hal_8h.html#a39b82a565244731577a6bfdc2d0fe321" title="Erase a page in the NVM." alt="" coords="142,5,279,32"/><area shape="rect" id="node7" href="nvm__hal_8h.html#ae5903c7cb194ab35d7637879ca492479" title="Read data from NVM." alt="" coords="157,56,264,83"/><area shape="rect" id="node9" href="nvm__hal_8h.html#a2b953c5361692ae60eb662ba86064693" title="Write data to NVM." alt="" coords="157,107,265,133"/><area shape="rect" id="node5" href="nvm__hal_8c.html#a29bdd111fd68cdbe036ca198591a62b1" title="Prototypes of functions that should be placed in RAM." alt="" coords="328,56,515,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga9cfeca62e83161ee1aa67187f59bcfdf"></a><!-- doxytag: member="nvm.h::NVM_Init" ref="ga9cfeca62e83161ee1aa67187f59bcfdf" args="(NVM_Config_t const *config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">NVM_Result_t</a> NVM_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structNVM__Config__t.html">NVM_Config_t</a> const *&nbsp;</td>
          <td class="paramname"> <em>config</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the NVM manager. </p>
<p>Use this function to initialize and validate the NVM. Should be run on startup. The result of this process is then returned in the form of a NVM_Result_t.</p>
<p>If nvmResultOk is returned, everything went according to plan and you can use the API right away. If nvmResultNoPages is returned this is a device that validates, but is empty. The proper way to handle this is to first reset the memory using NVM_Erase, and then write any initial data.</p>
<p>If a nvmResultError, or anything more specific, is returned something irreparable happened, and the system cannot be used reliably. A simple solution to this would be to erase and reinitialize, but this will then cause data loss.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>config</em>&nbsp;</td><td>Pointer to structure defining NVM area.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns the result of the initialization using a NVM_InitResult_TypeDef. </dd></dl>

<p>Definition at line <a class="el" href="nvm_8c_source.html#l00234">234</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

<p>References <a class="el" href="nvm_8h_source.html#l00171">NVM_Config_t::nvmArea</a>, <a class="el" href="nvm__hal_8c_source.html#l00433">NVMHAL_Init()</a>, <a class="el" href="nvm__hal_8c_source.html#l00483">NVMHAL_Read()</a>, <a class="el" href="nvm_8h_source.html#l00168">NVM_Config_t::nvmPages</a>, <a class="el" href="nvm_8h_source.html#l00139">nvmPageTypeNormal</a>, <a class="el" href="nvm_8h_source.html#l00140">nvmPageTypeWear</a>, <a class="el" href="nvm_8h_source.html#l00188">nvmResultError</a>, <a class="el" href="nvm_8h_source.html#l00187">nvmResultErrorInitial</a>, <a class="el" href="nvm_8h_source.html#l00184">nvmResultNoPages</a>, <a class="el" href="nvm_8h_source.html#l00177">nvmResultOk</a>, <a class="el" href="nvm_8h_source.html#l00159">NVM_Page_Descriptor_t::page</a>, <a class="el" href="nvm_8h_source.html#l00169">NVM_Config_t::pages</a>, <a class="el" href="nvm_8h_source.html#l00160">NVM_Page_Descriptor_t::pageType</a>, and <a class="el" href="nvm_8h_source.html#l00170">NVM_Config_t::userPages</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__NVM_ga9cfeca62e83161ee1aa67187f59bcfdf_cgraph.png" border="0" usemap="#group__NVM_ga9cfeca62e83161ee1aa67187f59bcfdf_cgraph_map" alt=""></div>
<map name="group__NVM_ga9cfeca62e83161ee1aa67187f59bcfdf_cgraph_map" id="group__NVM_ga9cfeca62e83161ee1aa67187f59bcfdf_cgraph">
<area shape="rect" id="node3" href="nvm__hal_8h.html#a67a31b5bf9f6a36a8e67b3d03bf59b38" title="Initialize NVM ." alt="" coords="134,5,229,32"/><area shape="rect" id="node5" href="nvm__hal_8h.html#ae5903c7cb194ab35d7637879ca492479" title="Read data from NVM." alt="" coords="128,56,235,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaa91a84a7102e51e3453f01293f292385"></a><!-- doxytag: member="nvm.h::NVM_Read" ref="gaa91a84a7102e51e3453f01293f292385" args="(uint16_t pageId, uint8_t objectId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">NVM_Result_t</a> NVM_Read </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>pageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>objectId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read an object or an entire page. </p>
<p>Use this function to read an object or an entire page from memory. It takes a page id and an object id (or the NVM_READ_ALL constant to read everything) and reads data from flash and puts it in the memory locations given in the page specification.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pageId</em>&nbsp;</td><td>Identifier of the page to read from.</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>objectId</em>&nbsp;</td><td>Identifier of the object to read. Can be set to NVM_READ_ALL to read an entire page.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns the result of the read operation using a NVM_Result_t. </dd></dl>

<p>Definition at line <a class="el" href="nvm_8c_source.html#l00843">843</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

<p>References <a class="el" href="nvm__hal_8c_source.html#l00483">NVMHAL_Read()</a>, <a class="el" href="nvm_8h_source.html#l00140">nvmPageTypeWear</a>, <a class="el" href="nvm_8h_source.html#l00181">nvmResultDataInvalid</a>, <a class="el" href="nvm_8h_source.html#l00185">nvmResultNoPage</a>, <a class="el" href="nvm_8h_source.html#l00177">nvmResultOk</a>, <a class="el" href="nvm_8h_source.html#l00159">NVM_Page_Descriptor_t::page</a>, and <a class="el" href="nvm_8h_source.html#l00160">NVM_Page_Descriptor_t::pageType</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__NVM_gaa91a84a7102e51e3453f01293f292385_cgraph.png" border="0" usemap="#group__NVM_gaa91a84a7102e51e3453f01293f292385_cgraph_map" alt=""></div>
<map name="group__NVM_gaa91a84a7102e51e3453f01293f292385_cgraph_map" id="group__NVM_gaa91a84a7102e51e3453f01293f292385_cgraph">
<area shape="rect" id="node3" href="nvm__hal_8h.html#ae5903c7cb194ab35d7637879ca492479" title="Read data from NVM." alt="" coords="139,5,245,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga00eaed13302c2951bec32c92dca57597"></a><!-- doxytag: member="nvm.h::NVM_WearLevelGet" ref="ga00eaed13302c2951bec32c92dca57597" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t NVM_WearLevelGet </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get maximum wear level. </p>
<p>This function returns the amount of erase cycles for the most erased page in memory. This can be used as a rough measure of health for the device.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns the wear level as a uint32_t. </dd></dl>

<p>Definition at line <a class="el" href="nvm_8c_source.html#l00951">951</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

<p>References <a class="el" href="nvm_8h_source.html#l00171">NVM_Config_t::nvmArea</a>, <a class="el" href="nvm__hal_8c_source.html#l00483">NVMHAL_Read()</a>, and <a class="el" href="nvm_8h_source.html#l00169">NVM_Config_t::pages</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__NVM_ga00eaed13302c2951bec32c92dca57597_cgraph.png" border="0" usemap="#group__NVM_ga00eaed13302c2951bec32c92dca57597_cgraph_map" alt=""></div>
<map name="group__NVM_ga00eaed13302c2951bec32c92dca57597_cgraph_map" id="group__NVM_ga00eaed13302c2951bec32c92dca57597_cgraph">
<area shape="rect" id="node3" href="nvm__hal_8h.html#ae5903c7cb194ab35d7637879ca492479" title="Read data from NVM." alt="" coords="189,5,296,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3731be4b973fb565af60dc9905bfe289"></a><!-- doxytag: member="nvm.h::NVM_Write" ref="ga3731be4b973fb565af60dc9905bfe289" args="(uint16_t pageId, uint8_t objectId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__NVM.html#ga0d8d4b3f88ff1fb2eb95b0b1ea14a7a4">NVM_Result_t</a> NVM_Write </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>pageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>objectId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write an object or a page. </p>
<p>Use this function to write an object or an entire page to NVM. It takes a page and an object and updates this object with the data pointed to by the corresponding page entry. All the objects in a page can be written simultaneously by using NVM_WRITE_ALL instead of an object ID. For "normal" pages it simply finds not used page in flash (with lowest erase counter) and copies all objects belonging to this page updating objects defined by objectId argument. For "wear" pages function tries to find spare place in already used page and write object here - if there is no free space it uses new page invalidating previously used one.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pageId</em>&nbsp;</td><td>Identifier of the page you want to write to NVM.</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>objectId</em>&nbsp;</td><td>Identifier of the object you want to write. May be set to NVM_WRITE_ALL to write the entire page to memory.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns the result of the write operation using a NVM_Result_t. </dd></dl>

<p>Definition at line <a class="el" href="nvm_8c_source.html#l00493">493</a> of file <a class="el" href="nvm_8c_source.html">nvm.c</a>.</p>

<p>References <a class="el" href="nvm__hal_8c_source.html#l00483">NVMHAL_Read()</a>, <a class="el" href="nvm__hal_8c_source.html#l00574">NVMHAL_Write()</a>, <a class="el" href="nvm_8h_source.html#l00139">nvmPageTypeNormal</a>, <a class="el" href="nvm_8h_source.html#l00140">nvmPageTypeWear</a>, <a class="el" href="nvm_8h_source.html#l00188">nvmResultError</a>, <a class="el" href="nvm_8h_source.html#l00187">nvmResultErrorInitial</a>, <a class="el" href="nvm_8h_source.html#l00177">nvmResultOk</a>, <a class="el" href="nvm_8h_source.html#l00159">NVM_Page_Descriptor_t::page</a>, and <a class="el" href="nvm_8h_source.html#l00160">NVM_Page_Descriptor_t::pageType</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="group__NVM_ga3731be4b973fb565af60dc9905bfe289_cgraph.png" border="0" usemap="#group__NVM_ga3731be4b973fb565af60dc9905bfe289_cgraph_map" alt=""></div>
<map name="group__NVM_ga3731be4b973fb565af60dc9905bfe289_cgraph_map" id="group__NVM_ga3731be4b973fb565af60dc9905bfe289_cgraph">
<area shape="rect" id="node3" href="nvm__hal_8h.html#ae5903c7cb194ab35d7637879ca492479" title="Read data from NVM." alt="" coords="143,5,249,32"/><area shape="rect" id="node5" href="nvm__hal_8h.html#a2b953c5361692ae60eb662ba86064693" title="Write data to NVM." alt="" coords="142,56,250,83"/><area shape="rect" id="node7" href="nvm__hal_8c.html#a29bdd111fd68cdbe036ca198591a62b1" title="Prototypes of functions that should be placed in RAM." alt="" coords="299,56,485,83"/></map>
</div>
</p>

</div>
</div>
</div>
<div id="footer">
<hr size="1"><address style="text-align: right;"><small>
Generated on Tue May 7 13:23:40 2013</small> for Energy Micro Drivers by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a><small> 1.6.3 </small></address></div>
</body>
</html>
